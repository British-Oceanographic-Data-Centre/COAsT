<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.70.0"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><script>(function(h,o,t,j,a,r){h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};h._hjSettings={hjid:2044976,hjsv:6};a=o.getElementsByTagName('head')[0];r=o.createElement('script');r.async=1;r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;a.appendChild(r);})(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');</script><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/COAsT/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/COAsT/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/COAsT/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/COAsT/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/COAsT/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/COAsT/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/COAsT/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/COAsT/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/COAsT/favicons/android-192x192.png sizes=192x192><title>Potential energy tutorial | COAsT</title><meta property="og:title" content="Potential energy tutorial"><meta property="og:description" content="Potential energy tutorial example."><meta property="og:type" content="article"><meta property="og:url" content="https://british-oceanographic-data-centre.github.io/COAsT/docs/examples/notebooks/gridded/potential_energy_tutorial/"><meta property="article:modified_time" content="2023-02-27T12:51:50+00:00"><meta property="og:site_name" content="COAsT"><meta itemprop=name content="Potential energy tutorial"><meta itemprop=description content="Potential energy tutorial example."><meta itemprop=dateModified content="2023-02-27T12:51:50+00:00"><meta itemprop=wordCount content="1670"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Potential energy tutorial"><meta name=twitter:description content="Potential energy tutorial example."><link rel=preload href=/COAsT/scss/main.min.bb1ca766e41a0e946ad64cf4afe1ef9cda4b8f5ac09cb29881652bb359f0df3c.css as=style><link href=/COAsT/scss/main.min.bb1ca766e41a0e946ad64cf4afe1ef9cda4b8f5ac09cb29881652bb359f0df3c.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.3.1.min.js integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin=anonymous></script><script src=https://unpkg.com/lunr@2.3.8/lunr.min.js integrity=sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY crossorigin=anonymous></script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/COAsT/><span class=navbar-logo><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zM197.0804 232.033c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zM197.0839 232.0372c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zM197.0839 232.0372c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zM197.0804 177.6188c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zM197.0839 177.623c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zM197.0839 177.623c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zM197.5309 286.4723c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zM197.5344 286.4765c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zM197.5344 286.4765c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zM197.0804 340.5784c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zM197.0839 340.5826c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zM197.0839 340.5826c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="text-uppercase font-weight-bold">COAsT</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/COAsT/about/><span>About</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/COAsT/docs/><span class=active>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/COAsT/community/><span>Community</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/COAsT/offline-search-index.380892f16fdd0c9a3d575476d51c3b796ea81f07f98c3ae93e3202b069bfa451a65b5d8a59d92fa4cc6621fbf671728b1f397aea5040fc2accdc4e5cf78f25bf.json data-offline-search-base-href=/></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/COAsT/offline-search-index.380892f16fdd0c9a3d575476d51c3b796ea81f07f98c3ae93e3202b069bfa451a65b5d8a59d92fa4cc6621fbf671728b1f397aea5040fc2accdc4e5cf78f25bf.json data-offline-search-base-href=/>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav pt-2 pl-4" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/COAsT/docs/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Documentation</a></li><ul><li class="collapse show" id=coastdocs><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/COAsT/docs/overview/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Overview</a></li><ul><li class=collapse id=coastdocsoverview></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/COAsT/docs/getting-started/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Getting Started</a></li><ul><li class=collapse id=coastdocsgetting-started><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/COAsT/docs/getting-started/getting-started-at-liverpool/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Getting started at Liverpool</a></li><ul><li class=collapse id=coastdocsgetting-startedgetting-started-at-liverpool></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/COAsT/docs/examples/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Examples</a></li><ul><li class="collapse show" id=coastdocsexamples><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/COAsT/docs/examples/notebooks/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Notebooks</a></li><ul><li class="collapse show" id=coastdocsexamplesnotebooks><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/COAsT/docs/examples/notebooks/gridded/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Gridded</a></li><ul><li class="collapse show" id=coastdocsexamplesnotebooksgridded><a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocsexamplesnotebooksgriddedcontour_tutorial href=/COAsT/docs/examples/notebooks/gridded/contour_tutorial/>Contour tutorial</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocsexamplesnotebooksgriddedintroduction_to_gridded_class href=/COAsT/docs/examples/notebooks/gridded/introduction_to_gridded_class/>Introduction to gridded class</a>
<a class="td-sidebar-link td-sidebar-link__page active" id=m-coastdocsexamplesnotebooksgriddedpotential_energy_tutorial href=/COAsT/docs/examples/notebooks/gridded/potential_energy_tutorial/>Potential energy tutorial</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocsexamplesnotebooksgriddedpycnocline_tutorial href=/COAsT/docs/examples/notebooks/gridded/pycnocline_tutorial/>Pycnocline tutorial</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocsexamplesnotebooksgriddedregridding_with_xesmf_tutorial href=/COAsT/docs/examples/notebooks/gridded/regridding_with_xesmf_tutorial/>Regridding with xesmf tutorial</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocsexamplesnotebooksgriddedseasia_dic_example_plot_tutorial href=/COAsT/docs/examples/notebooks/gridded/seasia_dic_example_plot_tutorial/>Seasia dic example plot tutorial</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocsexamplesnotebooksgriddedtransect_tutorial href=/COAsT/docs/examples/notebooks/gridded/transect_tutorial/>Transect tutorial</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/COAsT/docs/examples/notebooks/general/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">General utility</a></li><ul><li class=collapse id=coastdocsexamplesnotebooksgeneral><a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocsexamplesnotebooksgeneralclimatology_tutorial href=/COAsT/docs/examples/notebooks/general/climatology_tutorial/>Climatology tutorial</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocsexamplesnotebooksgeneraldask_wrapper_template_tutorial href=/COAsT/docs/examples/notebooks/general/dask_wrapper_template_tutorial/>Dask wrapper template tutorial</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocsexamplesnotebooksgeneraleof_tutorial href=/COAsT/docs/examples/notebooks/general/eof_tutorial/>Eof tutorial</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocsexamplesnotebooksgeneralexport_to_netcdf_tutorial href=/COAsT/docs/examples/notebooks/general/export_to_netcdf_tutorial/>Export to netcdf tutorial</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocsexamplesnotebooksgeneralmask_maker_tutorial href=/COAsT/docs/examples/notebooks/general/mask_maker_tutorial/>Mask maker tutorial</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocsexamplesnotebooksgeneralseasonal_decomp_example href=/COAsT/docs/examples/notebooks/general/seasonal_decomp_example/>Seasonal decomp example</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/COAsT/docs/examples/notebooks/altimetry/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Altimety</a></li><ul><li class=collapse id=coastdocsexamplesnotebooksaltimetry><a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocsexamplesnotebooksaltimetryaltimetry_tutorial href=/COAsT/docs/examples/notebooks/altimetry/altimetry_tutorial/>Altimetry tutorial</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/COAsT/docs/examples/notebooks/profile/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Profile</a></li><ul><li class=collapse id=coastdocsexamplesnotebooksprofile><a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocsexamplesnotebooksprofileintroduction_to_profile_class href=/COAsT/docs/examples/notebooks/profile/introduction_to_profile_class/>Introduction to profile class</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocsexamplesnotebooksprofilewod_bgc_ragged_example href=/COAsT/docs/examples/notebooks/profile/wod_bgc_ragged_example/>Wod bgc ragged example</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/COAsT/docs/examples/notebooks/tidegauge/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Tidegauge</a></li><ul><li class=collapse id=coastdocsexamplesnotebookstidegauge><a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocsexamplesnotebookstidegaugetidegauge_validation_tutorial href=/COAsT/docs/examples/notebooks/tidegauge/tidegauge_validation_tutorial/>Tidegauge validation tutorial</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocsexamplesnotebookstidegaugetidetable_tutorial href=/COAsT/docs/examples/notebooks/tidegauge/tidetable_tutorial/>Tidetable tutorial</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/COAsT/docs/examples/remote-datasets/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Remote Datasets</a></li><ul><li class=collapse id=coastdocsexamplesremote-datasets><a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocsexamplesremote-datasetscopernicus href=/COAsT/docs/examples/remote-datasets/copernicus/>Copernicus</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocsexamplesconfigs_gallery href=/COAsT/docs/examples/configs_gallery/>Gallery</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/COAsT/docs/contributing_package/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Contributing: COAsT</a></li><ul><li class=collapse id=coastdocscontributing_package><a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocscontributing_packagepython_style href=/COAsT/docs/contributing_package/python_style/>Python: Style</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocscontributing_packagepython_structure href=/COAsT/docs/contributing_package/python_structure/>Python: Structure</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocscontributing_packagepython_logging href=/COAsT/docs/contributing_package/python_logging/>Logging</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocscontributing_packagelazy-loading href=/COAsT/docs/contributing_package/lazy-loading/>Lazy</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocscontributing_packagedask href=/COAsT/docs/contributing_package/dask/>Dask</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocscontributing_packagebuild_test href=/COAsT/docs/contributing_package/build_test/>Build test</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocscontributing_packagepush_to_master href=/COAsT/docs/contributing_package/push_to_master/>Push to master</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/COAsT/docs/contributing-docs/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Contributing: Documentation</a></li><ul><li class=collapse id=coastdocscontributing-docs><a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocscontributing-docsgithub_actions_flowchart href=/COAsT/docs/contributing-docs/github_actions_flowchart/>Github Actions Flowchart</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocscontributing-docsgithub_workflow href=/COAsT/docs/contributing-docs/github_workflow/>Github Workflow</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocscontributing-docshugo href=/COAsT/docs/contributing-docs/hugo/>hugo</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-coastdocsreference href=/COAsT/docs/reference/>Index</a></li></ul></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/British-Oceanographic-Data-Centre/COAsT-site/edit/master/content/en/docs/Examples/Notebooks/Gridded/potential_energy_tutorial.md target=_blank><i class="fa fa-edit fa-fw"></i>Edit this page</a>
<a href="https://github.com/British-Oceanographic-Data-Centre/COAsT-site/issues/new?title=Potential%20energy%20tutorial" target=_blank><i class="fab fa-github fa-fw"></i>Create documentation issue</a>
<a href=https://github.com/British-Oceanographic-Data-Centre/COAsT/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i>Create project issue</a></div><nav id=TableOfContents><ul><li><ul><li><a href=#relevant-imports-and-filepath-configuration>Relevant imports and filepath configuration</a></li><li><a href=#loading-data>Loading data</a></li><li><a href=#calculates-potential-energy-anomaly>Calculates Potential Energy Anomaly</a></li></ul></li><li><a href=#make-a-plot>make a plot</a></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://british-oceanographic-data-centre.github.io/COAsT/docs/>Documentation</a></li><li class=breadcrumb-item><a href=https://british-oceanographic-data-centre.github.io/COAsT/docs/examples/>Examples</a></li><li class=breadcrumb-item><a href=https://british-oceanographic-data-centre.github.io/COAsT/docs/examples/notebooks/>Notebooks</a></li><li class=breadcrumb-item><a href=https://british-oceanographic-data-centre.github.io/COAsT/docs/examples/notebooks/gridded/>Gridded</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://british-oceanographic-data-centre.github.io/COAsT/docs/examples/notebooks/gridded/potential_energy_tutorial/>Potential energy tutorial</a></li></ol></nav><div class=td-content><h1>Potential energy tutorial</h1><div class=lead>Potential energy tutorial example.</div><p class=reading-time><i class="fa fa-clock" aria-hidden=true></i>8 minute read</p><p>A demonstration to calculate the Potential Energy Anomaly and demonstrate regional masking with MaskMaker</p><h3 id=relevant-imports-and-filepath-configuration>Relevant imports and filepath configuration</h3><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>coast</span>
<span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>numpy</span> <span style=color:#204a87;font-weight:700>as</span> <span style=color:#000>np</span>
<span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>os</span>
<span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>matplotlib.pyplot</span> <span style=color:#204a87;font-weight:700>as</span> <span style=color:#000>plt</span>
<span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>matplotlib.colors</span> <span style=color:#204a87;font-weight:700>as</span> <span style=color:#000>colors</span>  <span style=color:#8f5902;font-style:italic># colormap fiddling</span>
<span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>xarray</span> <span style=color:#204a87;font-weight:700>as</span> <span style=color:#000>xr</span>
</code></pre></div><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># set some paths</span>
<span style=color:#000>root</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;./&#34;</span>
<span style=color:#000>dn_files</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>root</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#4e9a06>&#34;./example_files/&#34;</span>
<span style=color:#000>fn_nemo_grid_t_dat</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>dn_files</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#4e9a06>&#34;nemo_data_T_grid_Aug2015.nc&#34;</span>
<span style=color:#000>fn_nemo_dom</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>dn_files</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#4e9a06>&#34;coast_example_nemo_domain.nc&#34;</span>
<span style=color:#000>config_t</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>root</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#4e9a06>&#34;./config/example_nemo_grid_t.json&#34;</span>
</code></pre></div><h3 id=loading-data>Loading data</h3><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Create a Gridded object and load in the data:</span>
<span style=color:#000>nemo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>coast</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>Gridded</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>fn_nemo_grid_t_dat</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>fn_nemo_dom</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>config</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>config_t</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><h3 id=calculates-potential-energy-anomaly>Calculates Potential Energy Anomaly</h3><p>The density and depth averaged density can be supplied within gridded_t as <code>density</code> and
<code>density_bar</code> DataArrays, respectively. If they are not supplied they will be calculated.
<code>density_bar</code> is calcuated using depth averages of temperature and salinity.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Compute a vertical max to exclude depths below 200m</span>
<span style=color:#000>Zd_mask</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>kmax</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Ikmax</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>nemo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>calculate_vertical_mask</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>200.</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#8f5902;font-style:italic># Initiate a stratification diagnostics object</span>
<span style=color:#000>strat</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>coast</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>GriddedStratification</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>nemo</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>
</code></pre></div><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># calculate PEA for unmasked depths</span>
<span style=color:#000>strat</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>calc_pea</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>nemo</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Zd_mask</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><h2 id=make-a-plot>make a plot</h2><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000>strat</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>quick_plot</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;PEA&#39;</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><p><img src=/COAsT/potential_energy_tutorial_files/potential_energy_tutorial_11_0.png alt=png></p><pre><code>(&lt;Figure size 1000x1000 with 2 Axes&gt;,
 &lt;Axes: title={'center': '01 Aug 2015: Potential Energy Anomaly (J / m^3)'}, xlabel='longitude', ylabel='latitude'&gt;)
</code></pre><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000>strat</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>dataset</span>
</code></pre></div><div><svg style="position:absolute;width:0;height:0;overflow:hidden"><defs><symbol id="icon-database" viewBox="0 0 32 32"><path d="M16 0C7.163.0.0 2.239.0 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5V5c0-2.761-7.163-5-16-5z"/><path d="M16 17c-8.837.0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><path d="M16 26c-8.837.0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/></symbol><symbol id="icon-file-text2" viewBox="0 0 32 32"><path d="M28.681 7.159c-.694-.947-1.662-2.053-2.724-3.116s-2.169-2.03-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319H4.5c-1.378.0-2.5 1.121-2.5 2.5v27C2 30.878 3.122 32 4.5 32h23c1.378.0 2.5-1.122 2.5-2.5V10c0-.448-.137-1.23-1.319-2.841zM24.543 5.457c.959.959 1.712 1.825 2.268 2.543H22V3.189c.718.556 1.584 1.309 2.543 2.268zM28 29.5c0 .271-.229.5-.5.5h-23c-.271.0-.5-.229-.5-.5v-27c0-.271.229-.5.5-.5.0.0 15.499.0 15.5.0v7c0 .552.448 1 1 1h7v19.5z"/><path d="M23 26H9c-.552.0-1-.448-1-1s.448-1 1-1h14c.552.0 1 .448 1 1s-.448 1-1 1z"/><path d="M23 22H9c-.552.0-1-.448-1-1s.448-1 1-1h14c.552.0 1 .448 1 1s-.448 1-1 1z"/><path d="M23 18H9c-.552.0-1-.448-1-1s.448-1 1-1h14c.552.0 1 .448 1 1s-.448 1-1 1z"/></symbol></defs></svg><style><p>:root{&ndash;xr-font-color0:var(&ndash;jp-content-font-color0,rgba(0,0,0,1));&ndash;xr-font-color2:var(&ndash;jp-content-font-color2,rgba(0,0,0,0.54));&ndash;xr-font-color3:var(&ndash;jp-content-font-color3,rgba(0,0,0,0.38));&ndash;xr-border-color:var(&ndash;jp-border-color2,#e0e0e0);&ndash;xr-disabled-color:var(&ndash;jp-layout-color3,#bdbdbd);&ndash;xr-background-color:var(&ndash;jp-layout-color0,white);&ndash;xr-background-color-row-even:var(&ndash;jp-layout-color1,white);&ndash;xr-background-color-row-odd:var(&ndash;jp-layout-color2,#eeeeee)}</p><p>html[theme=dark],body[data-theme=dark],body.vscode-dark{&ndash;xr-font-color0:#fff;&ndash;xr-font-color2:rgba(255,255,255,.54);&ndash;xr-font-color3:rgba(255,255,255,.38);&ndash;xr-border-color:#1f1f1f;&ndash;xr-disabled-color:#515151;&ndash;xr-background-color:#111;&ndash;xr-background-color-row-even:#111;&ndash;xr-background-color-row-odd:#313131}</p><p>.xr-wrap{display:block!important;min-width:300px;max-width:700px}</p><p>.xr-text-repr-fallback{display:none}</p><p>.xr-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px var(&ndash;xr-border-color)}</p><p>.xr-header &gt; div,.xr-header &gt; ul{display:inline;margin-top:0;margin-bottom:0}</p><p>.xr-obj-type,.xr-array-name{margin-left:2px;margin-right:10px}</p><p>.xr-obj-type{color:var(&ndash;xr-font-color2)}</p><p>.xr-sections{padding-left:0!important;display:grid;grid-template-columns:150px auto auto 1fr 20px 20px}</p><p>.xr-section-item{display:contents}</p><p>.xr-section-item input{display:none}</p><p>.xr-section-item input+label{color:var(&ndash;xr-disabled-color)}</p><p>.xr-section-item input:enabled+label{cursor:pointer;color:var(&ndash;xr-font-color2)}</p><p>.xr-section-item input:enabled+label:hover{color:var(&ndash;xr-font-color0)}</p><p>.xr-section-summary{grid-column:1;color:var(&ndash;xr-font-color2);font-weight:500}</p><p>.xr-section-summary &gt; span{display:inline-block;padding-left:.5em}</p><p>.xr-section-summary-in:disabled+label{color:var(&ndash;xr-font-color2)}</p><p>.xr-section-summary-in+label:before{display:inline-block;content:&lsquo;►&rsquo;font-size:11px;width:15px;text-align:center}</p><p>.xr-section-summary-in:disabled+label:before{color:var(&ndash;xr-disabled-color)}</p><p>.xr-section-summary-in:checked+label:before{content:&lsquo;▼&rsquo}</p><p>.xr-section-summary-in:checked+label &gt; span{display:none}</p><p>.xr-section-summary,.xr-section-inline-details{padding-top:4px;padding-bottom:4px}</p><p>.xr-section-inline-details{grid-column:2/-1}</p><p>.xr-section-details{display:none;grid-column:1/-1;margin-bottom:5px}</p><p>.xr-section-summary-in:checked~.xr-section-details{display:contents}</p><p>.xr-array-wrap{grid-column:1/-1;display:grid;grid-template-columns:20px auto}</p><p>.xr-array-wrap &gt; label{grid-column:1;vertical-align:top}</p><p>.xr-preview{color:var(&ndash;xr-font-color3)}</p><p>.xr-array-preview,.xr-array-data{padding:0 5px!important;grid-column:2}</p><p>.xr-array-data,.xr-array-in:checked~.xr-array-preview{display:none}</p><p>.xr-array-in:checked~.xr-array-data,.xr-array-preview{display:inline-block}</p><p>.xr-dim-list{display:inline-block!important;list-style:none;padding:0!important;margin:0}</p><p>.xr-dim-list li{display:inline-block;padding:0;margin:0}</p><p>.xr-dim-list:before{content:&lsquo;(';
}</p> <p>.xr-dim-list:after { content: &lsquo;)';
}</p><p>.xr-dim-list li:not(:last-child):after{content:&lsquo;,';
padding-right: 5px}</p><p>.xr-has-index{font-weight:700}</p><p>.xr-var-list,.xr-var-item{display:contents}</p><p>.xr-var-item &gt; div,.xr-var-item label,.xr-var-item &gt; .xr-var-name span{background-color:var(&ndash;xr-background-color-row-even);margin-bottom:0}</p><p>.xr-var-item &gt; .xr-var-name:hover span{padding-right:5px}</p><p>.xr-var-list &gt; li:nth-child(odd) &gt; div,.xr-var-list &gt; li:nth-child(odd) &gt; label,.xr-var-list &gt; li:nth-child(odd) &gt; .xr-var-name span{background-color:var(&ndash;xr-background-color-row-odd)}</p><p>.xr-var-name{grid-column:1}</p><p>.xr-var-dims{grid-column:2}</p><p>.xr-var-dtype{grid-column:3;text-align:right;color:var(&ndash;xr-font-color2)}</p><p>.xr-var-preview{grid-column:4}</p><p>.xr-index-preview{grid-column:2/5;color:var(&ndash;xr-font-color2)}</p><p>.xr-var-name,.xr-var-dims,.xr-var-dtype,.xr-preview,.xr-attrs dt{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px}</p><p>.xr-var-name:hover,.xr-var-dims:hover,.xr-var-dtype:hover,.xr-attrs dt:hover{overflow:visible;width:auto;z-index:1}</p><p>.xr-var-attrs,.xr-var-data,.xr-index-data{display:none;background-color:var(&ndash;xr-background-color)!important;padding-bottom:5px!important}</p><p>.xr-var-attrs-in:checked~.xr-var-attrs,.xr-var-data-in:checked~.xr-var-data,.xr-index-data-in:checked~.xr-index-data{display:block}</p><p>.xr-var-data &gt; table{float:right}</p><p>.xr-var-name span,.xr-var-data,.xr-index-name div,.xr-index-data,.xr-attrs{padding-left:25px!important}</p><p>.xr-attrs,.xr-var-attrs,.xr-var-data,.xr-index-data{grid-column:1/-1}</p><p>dl.xr-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto}</p><p>.xr-attrs dt,.xr-attrs dd{padding:0;margin:0;float:left;padding-right:10px;width:auto}</p><p>.xr-attrs dt{font-weight:400;grid-column:1}</p><p>.xr-attrs dt:hover span{display:inline-block;background:var(&ndash;xr-background-color);padding-right:10px}</p><p>.xr-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all}</p><p>.xr-icon-database,.xr-icon-file-text2,.xr-no-icon{display:inline-block;vertical-align:middle;width:1em;height:1.5em!important;stroke-width:0;stroke:currentColor;fill:currentColor}</style><pre class=xr-text-repr-fallback>&lt;xarray.Dataset&gt;
Dimensions:    (t_dim: 7, y_dim: 375, x_dim: 297)
Coordinates:
time       (t_dim) datetime64[ns] 2015-08-01T12:00:00 &hellip; 2015-08-07T12:0&hellip;
latitude   (y_dim, x_dim) float32 40.07 40.07 40.07 40.07 &hellip; 65.0 65.0 65.0
longitude  (y_dim, x_dim) float32 -19.89 -19.78 -19.67 &hellip; 12.78 12.89 13.0
Dimensions without coordinates: t_dim, y_dim, x_dim
Data variables:
PEA        (t_dim, y_dim, x_dim) float64 nan nan nan nan &hellip; nan nan nan nan</pre><div class=xr-wrap style=display:none><div class=xr-header><div class=xr-obj-type>xarray.Dataset</div></div><ul class=xr-sections><li class=xr-section-item><input id=section-2b4bbbbd-ae8b-49af-82c2-d3bbacce81cf class=xr-section-summary-in type=checkbox disabled><label for=section-2b4bbbbd-ae8b-49af-82c2-d3bbacce81cf class=xr-section-summary title="Expand/collapse section">Dimensions:</label><div class=xr-section-inline-details><ul class=xr-dim-list><li><span>t_dim</span>: 7</li><li><span>y_dim</span>: 375</li><li><span>x_dim</span>: 297</li></ul></div><div class=xr-section-details></div></li><li class=xr-section-item><input id=section-12b66190-968d-4b9e-b1a9-5f14e3fe08ff class=xr-section-summary-in type=checkbox checked><label for=section-12b66190-968d-4b9e-b1a9-5f14e3fe08ff class=xr-section-summary>Coordinates: <span>(3)</span></label><div class=xr-section-inline-details></div><div class=xr-section-details><ul class=xr-var-list><li class=xr-var-item><div class=xr-var-name><span>time</span></div><div class=xr-var-dims>(t_dim)</div><div class=xr-var-dtype>datetime64[ns]</div><div class="xr-var-preview xr-preview">2015-08-01T12:00:00 &mldr; 2015-08-&mldr;</div><input id=attrs-a62c4695-c4b6-412e-99e4-45a031779f18 class=xr-var-attrs-in type=checkbox disabled><label for=attrs-a62c4695-c4b6-412e-99e4-45a031779f18 title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id=data-8b504162-54c4-4c50-9c3e-d725f208740e class=xr-var-data-in type=checkbox><label for=data-8b504162-54c4-4c50-9c3e-d725f208740e title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class=xr-var-attrs><dl class=xr-attrs></dl></div><div class=xr-var-data><pre>array(['2015-08-01T12:00:00.000000000', '2015-08-02T12:00:00.000000000',
'2015-08-03T12:00:00.000000000', '2015-08-04T12:00:00.000000000',
'2015-08-05T12:00:00.000000000', '2015-08-06T12:00:00.000000000',
'2015-08-07T12:00:00.000000000'], dtype='datetime64[ns]')</pre></div></li><li class=xr-var-item><div class=xr-var-name><span>latitude</span></div><div class=xr-var-dims>(y_dim, x_dim)</div><div class=xr-var-dtype>float32</div><div class="xr-var-preview xr-preview">40.07 40.07 40.07 &mldr; 65.0 65.0</div><input id=attrs-0db8386e-dc1e-485b-bf40-c8bd3d991cb2 class=xr-var-attrs-in type=checkbox disabled><label for=attrs-0db8386e-dc1e-485b-bf40-c8bd3d991cb2 title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id=data-a51309e4-b15a-496b-8b59-3514e1be98ed class=xr-var-data-in type=checkbox><label for=data-a51309e4-b15a-496b-8b59-3514e1be98ed title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class=xr-var-attrs><dl class=xr-attrs></dl></div><div class=xr-var-data><pre>array([[40.066406, 40.066406, 40.066406, &hellip;, 40.066406, 40.066406,
40.066406],
[40.13379 , 40.13379 , 40.13379 , &hellip;, 40.13379 , 40.13379 ,
40.13379 ],
[40.200195, 40.200195, 40.200195, &hellip;, 40.200195, 40.200195,
40.200195],
&hellip;,
[64.868164, 64.868164, 64.868164, &hellip;, 64.868164, 64.868164,
64.868164],
[64.93457 , 64.93457 , 64.93457 , &hellip;, 64.93457 , 64.93457 ,
64.93457 ],
[65.00098 , 65.00098 , 65.00098 , &hellip;, 65.00098 , 65.00098 ,
65.00098 ]], dtype=float32)</pre></div></li><li class=xr-var-item><div class=xr-var-name><span>longitude</span></div><div class=xr-var-dims>(y_dim, x_dim)</div><div class=xr-var-dtype>float32</div><div class="xr-var-preview xr-preview">-19.89 -19.78 -19.67 &mldr; 12.89 13.0</div><input id=attrs-fef33f2c-f1fa-46d8-b878-af9a3377b9d3 class=xr-var-attrs-in type=checkbox disabled><label for=attrs-fef33f2c-f1fa-46d8-b878-af9a3377b9d3 title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id=data-2a2ef5a7-a2c9-44ac-bd0b-27ca0baaa6b9 class=xr-var-data-in type=checkbox><label for=data-2a2ef5a7-a2c9-44ac-bd0b-27ca0baaa6b9 title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class=xr-var-attrs><dl class=xr-attrs></dl></div><div class=xr-var-data><pre>array([[-19.888672, -19.777344, -19.666992, &hellip;,  12.777344,  12.888672,
13.      ],
[-19.888672, -19.777344, -19.666992, &hellip;,  12.777344,  12.888672,
13.      ],
[-19.888672, -19.777344, -19.666992, &hellip;,  12.777344,  12.888672,
13.      ],
&hellip;,
[-19.888672, -19.777344, -19.666992, &hellip;,  12.777344,  12.888672,
13.      ],
[-19.888672, -19.777344, -19.666992, &hellip;,  12.777344,  12.888672,
13.      ],
[-19.888672, -19.777344, -19.666992, &hellip;,  12.777344,  12.888672,
13.      ]], dtype=float32)</pre></div></li></ul></div></li><li class=xr-section-item><input id=section-c0af47dd-0f8f-4631-bfce-bda7099b5925 class=xr-section-summary-in type=checkbox checked><label for=section-c0af47dd-0f8f-4631-bfce-bda7099b5925 class=xr-section-summary>Data variables: <span>(1)</span></label><div class=xr-section-inline-details></div><div class=xr-section-details><ul class=xr-var-list><li class=xr-var-item><div class=xr-var-name><span>PEA</span></div><div class=xr-var-dims>(t_dim, y_dim, x_dim)</div><div class=xr-var-dtype>float64</div><div class="xr-var-preview xr-preview">nan nan nan nan &mldr; nan nan nan nan</div><input id=attrs-c71c68b9-fb0f-442d-a14e-4f6b43a46dea class=xr-var-attrs-in type=checkbox><label for=attrs-c71c68b9-fb0f-442d-a14e-4f6b43a46dea title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id=data-dd1f68ee-31e2-45f9-81ea-93ac1a285379 class=xr-var-data-in type=checkbox><label for=data-dd1f68ee-31e2-45f9-81ea-93ac1a285379 title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class=xr-var-attrs><dl class=xr-attrs><dt><span>units :</span></dt><dd>J / m^3</dd><dt><span>standard_name :</span></dt><dd>Potential Energy Anomaly</dd></dl></div><div class=xr-var-data><pre>array([[[         nan,          nan,          nan, &hellip;,          nan,
nan,          nan],
[         nan, 262.43849344, 261.16678604, &hellip;,          nan,
nan,          nan],
[         nan, 262.22882652, 292.63335667, &hellip;,          nan,
nan,          nan],
&hellip;,
[         nan,          nan,          nan, &hellip;,          nan,
nan,          nan],
[         nan,          nan,          nan, &hellip;,          nan,
nan,          nan],
[         nan,          nan,          nan, &hellip;,          nan,
nan,          nan]],</p>
<pre><code>   [[         nan,          nan,          nan, ...,          nan,
              nan,          nan],
    [         nan, 269.18332328, 268.17983174, ...,          nan,
              nan,          nan],
    [         nan, 268.76494494, 226.91876185, ...,          nan,
              nan,          nan],
</code></pre><p>&mldr;
[ nan, nan, nan, &mldr;, nan,
nan, nan],
[ nan, nan, nan, &mldr;, nan,
nan, nan],
[ nan, nan, nan, &mldr;, nan,
nan, nan]],</p><pre><code>   [[         nan,          nan,          nan, ...,          nan,
              nan,          nan],
    [         nan, 263.17561991, 262.13100791, ...,          nan,
              nan,          nan],
    [         nan, 263.60651849, 268.85516316, ...,          nan,
              nan,          nan],
    ...,
    [         nan,          nan,          nan, ...,          nan,
              nan,          nan],
    [         nan,          nan,          nan, ...,          nan,
              nan,          nan],
    [         nan,          nan,          nan, ...,          nan,
              nan,          nan]]])&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/li&gt;&lt;li class='xr-section-item'&gt;&lt;input id='section-d1fbae21-8d39-4ae9-92ce-5ee6cdd87758' class='xr-section-summary-in' type='checkbox' disabled &gt;&lt;label for='section-d1fbae21-8d39-4ae9-92ce-5ee6cdd87758' class='xr-section-summary'  title='Expand/collapse section'&gt;Indexes: &lt;span&gt;(0)&lt;/span&gt;&lt;/label&gt;&lt;div class='xr-section-inline-details'&gt;&lt;/div&gt;&lt;div class='xr-section-details'&gt;&lt;ul class='xr-var-list'&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/li&gt;&lt;li class='xr-section-item'&gt;&lt;input id='section-35cd11f7-b9f6-4ea6-9f65-1b6715761d29' class='xr-section-summary-in' type='checkbox' disabled &gt;&lt;label for='section-35cd11f7-b9f6-4ea6-9f65-1b6715761d29' class='xr-section-summary'  title='Expand/collapse section'&gt;Attributes: &lt;span&gt;(0)&lt;/span&gt;&lt;/label&gt;&lt;div class='xr-section-inline-details'&gt;&lt;/div&gt;&lt;div class='xr-section-details'&gt;&lt;dl class='xr-attrs'&gt;&lt;/dl&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;
</code></pre><h1 id=use-maskmaker-to-define-regions-and-do-regional-analysis>Use MaskMaker to define regions and do regional analysis</h1><p>MaskMaker can build a stack of boolean masks in an xarray dataset for regional analysis. For the NWS we can use some built-in regions.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000>mm</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>coast</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>MaskMaker</span><span style=color:#000;font-weight:700>()</span>

<span style=color:#8f5902;font-style:italic># Define Regional Masks</span>
<span style=color:#000>regional_masks</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[]</span>

<span style=color:#8f5902;font-style:italic># Define convenient aliases based on nemo data</span>
<span style=color:#000>lon</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>nemo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>dataset</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>longitude</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>values</span>
<span style=color:#000>lat</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>nemo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>dataset</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>latitude</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>values</span>
<span style=color:#000>bathy</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>nemo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>dataset</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bathymetry</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>values</span>

<span style=color:#8f5902;font-style:italic># Add regional mask for whole domain</span>
<span style=color:#000>regional_masks</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>np</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>ones</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>lon</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>shape</span><span style=color:#000;font-weight:700>))</span>

<span style=color:#8f5902;font-style:italic># Add regional mask for English Channel</span>
<span style=color:#000>regional_masks</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mm</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>region_def_nws_north_sea</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>lon</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>lat</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>bathy</span><span style=color:#000;font-weight:700>))</span>
<span style=color:#000>regional_masks</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mm</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>region_def_nws_outer_shelf</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>lon</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>lat</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>bathy</span><span style=color:#000;font-weight:700>))</span>
<span style=color:#000>regional_masks</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mm</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>region_def_nws_norwegian_trench</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>lon</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>lat</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>bathy</span><span style=color:#000;font-weight:700>))</span>
<span style=color:#000>regional_masks</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mm</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>region_def_nws_english_channel</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>lon</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>lat</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>bathy</span><span style=color:#000;font-weight:700>))</span>
<span style=color:#000>regional_masks</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mm</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>region_def_south_north_sea</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>lon</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>lat</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>bathy</span><span style=color:#000;font-weight:700>))</span>
<span style=color:#000>regional_masks</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mm</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>region_def_off_shelf</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>lon</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>lat</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>bathy</span><span style=color:#000;font-weight:700>))</span>
<span style=color:#000>regional_masks</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mm</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>region_def_irish_sea</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>lon</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>lat</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>bathy</span><span style=color:#000;font-weight:700>))</span>
<span style=color:#000>regional_masks</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mm</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>region_def_kattegat</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>lon</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>lat</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>bathy</span><span style=color:#000;font-weight:700>))</span>

<span style=color:#000>region_names</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;whole domain&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;north sea&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;outer shelf&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;norwegian trench&#34;</span><span style=color:#000;font-weight:700>,</span>
                <span style=color:#4e9a06>&#34;english_channel&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;southern north sea&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;off shelf&#34;</span><span style=color:#000;font-weight:700>,</span>
                <span style=color:#4e9a06>&#34;irish sea&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;kattegat&#34;</span><span style=color:#000;font-weight:700>,]</span>
</code></pre></div><pre><code>---------------------------------------------------------------------------

AttributeError                            Traceback (most recent call last)

Cell In[8], line 15
     12 regional_masks.append(np.ones(lon.shape))
     14 # Add regional mask for English Channel
---&gt; 15 regional_masks.append(mm.region_def_nws_north_sea(lon, lat, bathy))
     16 regional_masks.append(mm.region_def_nws_outer_shelf(lon, lat, bathy))
     17 regional_masks.append(mm.region_def_nws_norwegian_trench(lon, lat, bathy))


AttributeError: 'MaskMaker' object has no attribute 'region_def_nws_north_sea'
</code></pre><p>Convert this list of masks into a dataset</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000>mask_list</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>mm</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>make_mask_dataset</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>lon</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>lat</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>regional_masks</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>region_names</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><pre><code>---------------------------------------------------------------------------

NameError                                 Traceback (most recent call last)

Cell In[9], line 1
----&gt; 1 mask_list = mm.make_mask_dataset(lon, lat, regional_masks, region_names)


NameError: name 'region_names' is not defined
</code></pre><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000>mask_list</span>
</code></pre></div><pre><code>---------------------------------------------------------------------------

NameError                                 Traceback (most recent call last)

Cell In[10], line 1
----&gt; 1 mask_list


NameError: name 'mask_list' is not defined
</code></pre><p>Inspect the mask with a <code>quick_plot()</code> method.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000>mm</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>quick_plot</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mask_list</span><span style=color:#000;font-weight:700>)</span>

</code></pre></div><pre><code>---------------------------------------------------------------------------

NameError                                 Traceback (most recent call last)

Cell In[11], line 1
----&gt; 1 mm.quick_plot(mask_list)


NameError: name 'mask_list' is not defined
</code></pre><p>NB overlapping regions are not given special treatment, the layers are blindly superimposed on each other. E.g. as demonstrated with &ldquo;Norwegian Trench&rdquo; and &ldquo;off shelf&rdquo;, or &ldquo;whole domain&rdquo; and any other region.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>
<span style=color:#000>plt</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>subplot</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>mm</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>quick_plot</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mask_list</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>sel</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>dim_mask</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>]))</span>

<span style=color:#000>plt</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>subplot</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>mm</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>quick_plot</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mask_list</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>sel</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>dim_mask</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>6</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>7</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>8</span><span style=color:#000;font-weight:700>]))</span>



<span style=color:#000>plt</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>tight_layout</span><span style=color:#000;font-weight:700>()</span>
</code></pre></div><pre><code>---------------------------------------------------------------------------

NameError                                 Traceback (most recent call last)

Cell In[12], line 2
      1 plt.subplot(2,2,1)
----&gt; 2 mm.quick_plot(mask_list.sel(dim_mask=[0,3]))
      4 plt.subplot(2,2,2)
      5 mm.quick_plot(mask_list.sel(dim_mask=[1,2,4,5,6,7,8]))


NameError: name 'mask_list' is not defined
</code></pre><p><img src=/COAsT/potential_energy_tutorial_files/potential_energy_tutorial_21_1.png alt=png></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Show overlap</span>
<span style=color:#000>mask_list</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>mask</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>sum</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>dim</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;dim_mask&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>plot</span><span style=color:#000;font-weight:700>(</span> <span style=color:#000>levels</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>))</span>

<span style=color:#8f5902;font-style:italic># Save if required</span>
<span style=color:#8f5902;font-style:italic>#plt.savefig(&#39;tmp.png&#39;)</span>
</code></pre></div><pre><code>---------------------------------------------------------------------------

NameError                                 Traceback (most recent call last)

Cell In[13], line 2
      1 # Show overlap
----&gt; 2 mask_list.mask.sum(dim='dim_mask').plot( levels=(1,2,3,4))
      4 # Save if required
      5 #plt.savefig('tmp.png')


NameError: name 'mask_list' is not defined
</code></pre><h1 id=regional-analysis>Regional analysis</h1><p>Average stratification object over regions using the mask</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000>mask_means</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>strat</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>dataset</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>mask_list</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>mask</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>mean</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>dim</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;x_dim&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>mean</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>dim</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;y_dim&#39;</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><pre><code>---------------------------------------------------------------------------

NameError                                 Traceback (most recent call last)

Cell In[14], line 1
----&gt; 1 mask_means = (strat.dataset*mask_list.mask).mean(dim='x_dim').mean(dim='y_dim')


NameError: name 'mask_list' is not defined
</code></pre><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000>mask_means</span>
</code></pre></div><pre><code>---------------------------------------------------------------------------

NameError                                 Traceback (most recent call last)

Cell In[15], line 1
----&gt; 1 mask_means


NameError: name 'mask_means' is not defined
</code></pre><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Plot timeseries per region</span>

<span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>count_region</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#204a87>range</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mask_means</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>dims</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;dim_mask&#39;</span><span style=color:#000;font-weight:700>]):</span>
    
    <span style=color:#000>plt</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>plot</span><span style=color:#000;font-weight:700>(</span> 
        <span style=color:#000>mask_means</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>PEA</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>isel</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>dim_mask</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>count_region</span><span style=color:#000;font-weight:700>),</span>
        <span style=color:#000>label</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>mask_means</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>region_names</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>count_region</span><span style=color:#000;font-weight:700>]</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>values</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#000>marker</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;.&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>linestyle</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;none&#39;</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#000>plt</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>xlabel</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;time&#39;</span><span style=color:#000;font-weight:700>);</span> <span style=color:#000>plt</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>ylabel</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;PEA&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>plt</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>legend</span><span style=color:#000;font-weight:700>()</span>
</code></pre></div><pre><code>---------------------------------------------------------------------------

NameError                                 Traceback (most recent call last)

Cell In[16], line 3
      1 # Plot timeseries per region
----&gt; 3 for count_region in range(mask_means.dims['dim_mask']):
      5     plt.plot( 
      6         mask_means.PEA.isel(dim_mask=count_region),
      7         label=mask_means.region_names[count_region].values,
      8         marker=&quot;.&quot;, linestyle='none')
     10 plt.xlabel('time'); plt.ylabel('PEA')


NameError: name 'mask_means' is not defined
</code></pre><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="feedback--answer feedback--answer-yes">Yes</button>
<button class="feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes">Glad to hear it!</p><p class="feedback--response feedback--response-no">Sorry to hear that. Please <a href=https://github.com/British-Oceanographic-Data-Centre/COAsT/issues/new>tell us how we can improve</a>.</p><script>const yesButton=document.querySelector('.feedback--answer-yes');const noButton=document.querySelector('.feedback--answer-no');const yesResponse=document.querySelector('.feedback--response-yes');const noResponse=document.querySelector('.feedback--response-no');const disableButtons=()=>{yesButton.disabled=true;noButton.disabled=true;};const sendFeedback=(value)=>{if(typeof ga!=='function')return;const args={command:'send',hitType:'event',category:'Helpful',action:'click',label:window.location.pathname,value:value};ga(args.command,args.hitType,args.category,args.action,args.label,args.value);};yesButton.addEventListener('click',()=>{yesResponse.classList.add('feedback--response__visible');disableButtons();sendFeedback(1);});noButton.addEventListener('click',()=>{noResponse.classList.add('feedback--response__visible');disableButtons();sendFeedback(0);});</script><br><div class="text-muted mt-5 pt-3 border-top">Last modified February 27, 2023: <a href=https://github.com/British-Oceanographic-Data-Centre/COAsT-site/commit/399cc553b2dc09a051c5684071b725726ba17dd7>Updated Gridded notebook pages from coast repo. (399cc55)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="COAsT Pypi" aria-label="COAsT Pypi"><a class=text-white target=_blank href=https://pypi.org/project/COAsT/#history><i></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank href=https://github.com/British-Oceanographic-Data-Centre/COAsT><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2023 The Docsy Authors All Rights Reserved</small>
<small class=ml-1><a href=https://policies.google.com/privacy target=_blank>Privacy Policy</a></small><p class=mt-2><a href=/COAsT/about/>About Goldydocs</a></p></div></div></div></footer></div><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=/COAsT/js/main.min.7afee248b9b3c1d4438c6841cc272ae0ac1f81a3ee5c0ed939f1d57c18de3f7d.js integrity="sha256-ev7iSLmzwdRDjGhBzCcq4KwfgaPuXA7ZOfHVfBjeP30=" crossorigin=anonymous></script></body></html>